<div class="main__place">
    <ng-container *ngIf="inboxQuery.type$ | async as type">
        <div *ngIf="type === 'LIST'" class="type__list">
            <app-view-header [title]="'Inbox'" [editableTitle]="false" (viewAsEvent)="updateType($event)"></app-view-header>
            <!-- list header -->

            <app-list-task *ngFor="let taskID of tasksID$ | async" [taskID]="taskID"></app-list-task>

            <!-- add task --- -->
            <app-add-task-label *ngIf="!addNoSecTask" [text]="'Add Task'" (click)="addNoSecTask = true"></app-add-task-label>
            <app-add-task *ngIf="addNoSecTask" (closeEvent)="addNoSecTask = false" (addTaskEvent)="addNoSectionTask($event)"></app-add-task>
            <!--  --- add task -->

            <app-list-section *ngFor="let sectionID of sectionsID$ | async" [sectionID]="sectionID"></app-list-section>

            <app-list-add-section (addSectionEvent)="addSection($event)"></app-list-add-section>
        </div>
        <!-- list -->

        <div *ngIf="type === 'BOARD'" class="type__table">
            <app-view-header [title]="'Inbox'" [editableTitle]="false" (viewAsEvent)="updateType($event)"></app-view-header>

            <div class="columns__wrapper">
                <app-table-column
                    *ngIf="(tasksID$ | async)?.length"
                    [title]="'(No Section)'"
                    [editableTitle]="false"
                    [inbox]="true"
                ></app-table-column>

                <ng-container *ngFor="let sectionID of sectionsID$ | async; let i = index">
                    <!-- todo : check for tasksID double sub remove -->
                    <app-table-add-section
                        *ngIf="(tasksID$ | async)?.length || i !== 0"
                        [type]="'bar'"
                        (addSectionEvent)="addSection($event)"
                    ></app-table-add-section>
                    <app-table-column [sectionID]="sectionID"></app-table-column>
                </ng-container>

                <app-table-add-section [type]="'panel'" (addSectionEvent)="addSection($event)"></app-table-add-section>
            </div>
        </div>
        <!-- table -->
    </ng-container>
</div>
